<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üåå Trip Picker ‚Äî Hidden India</title>
<meta name="description" content="Classy psychedelic cosmos UI for voting on offbeat India trips. Live filters, fun vote bursts, leaderboard, Google links." />

<!-- Social preview (edit URL if you add cover.png) -->
<meta property="og:title" content="Cosmic Trip Picker ‚Äî Hidden India" />
<meta property="og:description" content="Vote on unique trips. Starry UI, live leaderboard, Google links, shareable votes." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://YOUR-USERNAME.github.io/YOUR-REPO/" />
<meta property="og:image" content="https://YOUR-USERNAME.github.io/YOUR-REPO/cover.png" />
<meta name="twitter:card" content="summary_large_image" />

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2285%22>üåå</text></svg>">

<style>
  :root{
    --fg:#edf2ff; --muted:#b9c7ea; --line:#1b2342;
    --glass:#0a0f21cc; --glass2:#0a0e1ccc; --accent:#8ef6d9; --hot:#ffd166;
    --chip:#101734; --chipOn:#182358;
    --card:#0c1126; --card2:#0a0f21;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--fg);
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:#070a16; overflow-x:hidden;
  }

  /* ===== COSMOS BACKGROUND ===== */
  canvas#stars, canvas#bursts { position:fixed; inset:0; z-index:-2; display:block }
  .nebula{
    position:fixed; inset:-25vmax; z-index:-3; filter:blur(80px) saturate(120%);
    background:
      radial-gradient(60vmax 40vmax at 10% 10%, #18223d 0%, transparent 60%),
      radial-gradient(70vmax 50vmax at 85% 15%, #151f3a 0%, transparent 60%),
      radial-gradient(90vmax 60vmax at 40% 90%, #1a2448 0%, transparent 70%);
    opacity:.85; animation: driftNeb 40s ease-in-out infinite alternate;
  }
  @keyframes driftNeb { 0%{transform:translate3d(0,0,0)} 100%{transform:translate3d(2vmin,-2vmin,0)} }
  @media (prefers-reduced-motion: reduce){ .nebula{animation:none} }

  /* ===== LAYOUT ===== */
  header, .foot {
    position:sticky; inset-inline:0; backdrop-filter: blur(10px) saturate(160%);
    background: var(--glass2); border-block:1px solid var(--line); z-index:20;
  }
  header{ top:0 } .foot{ bottom:0 }
  .wrap{max-width:1180px; margin:0 auto; padding:14px 16px}
  h1{margin:0 0 4px; font-weight:900; letter-spacing:.2px}
  .sub{margin:0; color:var(--muted)}

  .toolbar{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
  .chip{
    padding:9px 12px; border-radius:999px; background:var(--chip); color:#dbe7ff;
    border:1px solid #263060; user-select:none; cursor:pointer; transition:.15s;
  }
  .chip.on{ background:var(--chipOn); border-color:#3b4b8b; box-shadow:0 0 0 1px #3b4b8b inset }
  .chip:hover{ transform: translateY(-1px) }

  .searchbar{display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-top:10px}
  input[type="search"]{
    background:#0a1024; color:var(--fg); border:1px solid #23315e;
    padding:10px 12px; border-radius:12px; flex:1; min-width:220px
  }
  .btn{
    background:#0c1333; color:#eaf6ff; border:1px solid #2a3569;
    padding:10px 12px; border-radius:12px; cursor:pointer; transition:.15s; font-weight:800
  }
  .btn:hover{ transform: translateY(-1px) }
  .btn.hot{ background:linear-gradient(90deg,#17d1a0,#87a9ff); color:#031115; border-color:#46e1d3 }
  .btn.ghost{ background:transparent }
  .hint{ color:#9fb3eb; font-size:12px }

  .layout{ display:grid; grid-template-columns: 1fr 330px; gap:16px; }
  @media (max-width: 980px){ .layout{ grid-template-columns: 1fr } }

  .grid{ display:grid; gap:14px; grid-template-columns: repeat(auto-fill, minmax(270px, 1fr)); padding:16px 0 120px; }

  /* ===== CARDS ===== */
  .card{
    background: linear-gradient(180deg, var(--card), var(--card2));
    border: 1px solid #20284d; border-radius: 18px; padding: 15px;
    position:relative; overflow:hidden;
    box-shadow: 0 16px 36px -22px #000, 0 0 0 1px #0f1a36 inset;
  }
  .badge{ position:absolute; top:10px; right:10px; font-size:12px; padding:4px 8px; border-radius:999px;
          border:1px solid #2a376a; background:#0d1633bb; color:#b8c7ff }
  .title{ font-weight:900; font-size:18px; margin:2px 32px 6px 0 }
  .meta{ color:#cfe0ff; font-size:12px; display:flex; gap:8px; flex-wrap:wrap; margin:4px 0 10px }
  .tag{ font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid #2b3767; background:#0e1633 }
  .why{ color:#e7efff; font-size:14px; margin:4px 0 12px }
  .actions{ display:flex; gap:8px; flex-wrap:wrap; align-items:center }
  .count{ font-weight:900; color:var(--hot) }
  .liked{ background:linear-gradient(90deg,#1cc9a3,#80f)!important; color:#021611!important; border-color:#44e4d8!important }

  aside .panel{ background: linear-gradient(180deg, #0a1126cc, #0a0f22cc);
                border:1px solid #20284d; border-radius:14px; padding:12px; margin:8px 0 }
  .lead .row{ display:flex; justify-content:space-between; align-items:center; gap:8px }
  .lead .name{ font-weight:800 } .lead .score{ font-weight:900; color:#ffd166 }
  .crown{ filter: drop-shadow(0 0 6px #ffd16688) }

  .foot .wrap{ display:flex; justify-content:space-between; gap:10px; align-items:center; flex-wrap:wrap }
  .selected{ display:flex; flex-wrap:wrap; gap:6px }
  .pill{ display:inline-flex; align-items:center; gap:6px; background:#0e1734; border:1px solid #263469; padding:6px 10px; border-radius:999px; font-size:13px }

  @media (max-width:600px){ .btn{ padding:12px 14px } .chip{ padding:10px 14px } .title{ font-size:19px } .why{ font-size:15px } }
</style>
</head>
<body>
<div class="nebula" aria-hidden="true"></div>
<canvas id="stars" aria-hidden="true"></canvas>
<canvas id="bursts" aria-hidden="true"></canvas>

<header>
  <div class="wrap">
    <h1>üåå Cosmic Trip Picker ‚Äî Hidden India</h1>
    <p class="sub">Tap üëç to vote (tap again to un-vote). Filters work. Each card opens Google. Funny bursts included.</p>

    <div class="toolbar" id="filters">
      <div class="chip on" data-tag="mountains">Mountains</div>
      <div class="chip on" data-tag="beach">Beaches</div>
      <div class="chip on" data-tag="forest">Forests</div>
      <div class="chip on" data-tag="rivers">Rivers</div>
      <div class="chip on" data-tag="desert">Desert</div>
      <div class="chip on" data-tag="culture">Culture</div>
      <div class="chip on" data-tag="psy">Trippy</div>
      <div class="chip on" data-tag="zero-crowd">Hidden</div>
      <div class="chip on" data-tag="all">All</div>
    </div>

    <div class="searchbar">
      <input id="q" type="search" placeholder="Search destinations, states, vibes‚Ä¶" />
      <button class="btn" id="clear">Clear</button>
      <button class="btn ghost" id="randomize">üé≤ Randomize</button>
      <button class="btn hot" id="share">üîó Share Votes</button>
      <span class="hint">Votes are per device. ‚ÄúShare Votes‚Äù copies a link that imports your scores.</span>
    </div>
  </div>
</header>

<div class="wrap" style="margin-top:6px">
  <div class="layout">
    <main>
      <div class="grid" id="grid"></div>
    </main>
    <aside>
      <div class="panel">
        <h3 style="margin:6px 0 4px">üèÜ Leaderboard</h3>
        <div id="leaderboard" class="lead"></div>
      </div>
      <div class="panel">
        <h3 style="margin:6px 0 4px">‚ÑπÔ∏è Tips</h3>
        <p class="hint">Long-press üëç to reset just that card. Use ‚ÄúReset All‚Äù below for a clean slate.</p>
      </div>
    </aside>
  </div>
</div>

<div class="foot">
  <div class="wrap">
    <div id="selected" class="selected"></div>
    <div class="row" style="display:flex; gap:8px; flex-wrap:wrap">
      <button class="btn" id="resetVotes">üóëÔ∏è Reset All</button>
      <button class="btn" id="sortVotes">Sort by Votes</button>
    </div>
  </div>
</div>

<script>
/* ===== DATA (all options we discussed) ===== */
const DESTS = [
  {id:'hampi-deep', name:'Hampi + Anegundi/Sanapur + Sandur', state:'Karnataka', why:'Boulder valleys, ruins, river-island hush; red-ore canyon drives.', tags:['psy','culture','mountains','rivers','zero-crowd']},
  {id:'gokarna-arc', name:'Gokarna Quiet Arc + Kumta‚ÄìHonnavar Coves', state:'Karnataka Coast', why:'Cliff trails to pocket beaches, bioluminescence nights (if lucky).', tags:['beach','psy','zero-crowd']},
  {id:'vattakanal', name:'Vattakanal + Poombarai', state:'Tamil Nadu', why:'Cloud forests, boho caf√©s, jams; Kodai without crowds.', tags:['mountains','forest','psy','zero-crowd']},
  {id:'sainj', name:'Sainj Valley (GHNP back-valley)', state:'Himachal', why:'Cedar woods, stone hamlets, massive starfields.', tags:['mountains','forest','zero-crowd']},
  {id:'kasar-binsar', name:'Kasar Devi Ridge + Binsar', state:'Uttarakhand', why:'Old hippie-trail energy; Himalayan sunsets from pine ridges.', tags:['mountains','psy','forest','zero-crowd']},
  {id:'meghalaya', name:'Meghalaya: Shnongpdeng ‚Üí Dawki ‚Üí Nongriat', state:'Meghalaya', why:'Living root bridges, glass-clear rivers, easy caves.', tags:['rivers','forest','psy','zero-crowd']},
  {id:'andaman-slow', name:'Andamans: Neil (Shaheed) + Long Island', state:'Andaman & Nicobar', why:'Forest-to-beach hikes, reef flats, plankton nights.', tags:['beach','forest','zero-crowd']},
  {id:'valparai', name:'Valparai + Sholayar', state:'TN/Kerala Border', why:'Tea highlands, rainforest gullies, lion-tailed macaques.', tags:['forest','mountains','zero-crowd']},
  {id:'dhanushkodi', name:'Dhanushkodi + Gulf of Mannar', state:'Tamil Nadu', why:'End-of-the-land sandspit, glassy lagoons, wind & kites.', tags:['beach','psy','zero-crowd']},
  {id:'chettinad', name:'Chettinad Mansions (Karaikudi)', state:'Tamil Nadu', why:'Palatial homes, Athangudi tiles, craft cycles.', tags:['culture','zero-crowd']},
  {id:'valiyaparamba', name:'Valiyaparamba + Kavvayi Backwaters', state:'North Kerala', why:'Backwaters without Alleppey crowds; islands & sandbars.', tags:['rivers','beach','zero-crowd']},
  {id:'bhogwe', name:'Bhogwe‚ÄìNivati‚ÄìVengurla Arc', state:'South Maharashtra', why:'Empty coves, laterite cliffs, teal water; pre-2005 Goa vibe.', tags:['beach','zero-crowd']},
  {id:'kutch', name:'Kutch Crafts + White Rann', state:'Gujarat', why:'Salt-desert moonscapes with living craft villages.', tags:['desert','culture','zero-crowd']},
  {id:'dzongu', name:'Dzongu (Lepcha Reserve)', state:'North Sikkim', why:'Sacred groves, hot springs, rivers; Lepcha culture.', tags:['mountains','forest','zero-crowd']},

  /* Maharashtra forests */
  {id:'koyna', name:'Koyna‚ÄìVasota', state:'Maharashtra', why:'Boat across Koyna backwaters + jungle trek to cliff-top fort.', tags:['forest','rivers','zero-crowd']},
  {id:'chandoli', name:'Chandoli National Park', state:'Maharashtra', why:'Maratha forts swallowed by forest; gaur & civet nights.', tags:['forest','zero-crowd']},
  {id:'radhanagari', name:'Radhanagari Bison Sanctuary', state:'Maharashtra', why:'Foggy grasslands, gaur herds, blue-hour plateaus.', tags:['forest','zero-crowd']},
  {id:'amboli', name:'Amboli Ghats', state:'Maharashtra', why:'Shola cloud-forest, moody winter hikes.', tags:['forest','mountains','zero-crowd']},
  {id:'phansad', name:'Phansad Wildlife Sanctuary', state:'Maharashtra', why:'Coastal forest + watchtowers; sea-breeze mornings.', tags:['forest','rivers','zero-crowd']},
  {id:'bhimashankar', name:'Bhimashankar WLS', state:'Maharashtra', why:'Sacred groves, Malabar giant squirrels, mossy trails.', tags:['forest','mountains','zero-crowd']},
  {id:'tamhini', name:'Tamhini‚ÄìMulshi Belt', state:'Maharashtra', why:'Fern gullies, mirror lakes, blue-hour photography.', tags:['forest','rivers','zero-crowd']},
  {id:'nagzira', name:'Navegaon‚ÄìNagzira TR', state:'Maharashtra', why:'Twin lakes, bamboo‚Äìsal mosaics, superb birding.', tags:['forest','rivers','zero-crowd']},
  {id:'tipeshwar', name:'Tipeshwar WLS', state:'Maharashtra', why:'Compact teak with frequent big-cat sightings.', tags:['forest','psy']},
  {id:'umred', name:'Umred‚ÄìKarhandla', state:'Maharashtra', why:'Raw teak corridors; old-school forest energy.', tags:['forest','zero-crowd']},
  {id:'melghat', name:'Melghat TR (Satpura)', state:'Maharashtra', why:'Deep valleys, sparkling night skies, tribal hamlets.', tags:['forest','mountains','zero-crowd']},
  {id:'pench-mh', name:'Pench (Sillari, MH side)', state:'Maharashtra', why:'Kipling woods; calmer gates than MP side.', tags:['forest','rivers']}
];

/* ===== STATE ===== */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));
const votesKey = 'tripVotes_cosmos_v1';
const picksKey = 'tripPicks_v1';
let votes = loadVotes(); // { id: 0|1 }
let activeTags = new Set(['mountains','beach','forest','rivers','desert','culture','psy','zero-crowd','all']);
let searchQ = '';

/* ===== CANVASES (fixed) ===== */
const starCanvas   = document.getElementById('stars');
const starCtx      = starCanvas.getContext('2d');
const burstsCanvas = document.getElementById('bursts');
const burstsCtx    = burstsCanvas.getContext('2d');

function fit(){
  starCanvas.width   = innerWidth;
  starCanvas.height  = innerHeight;
  burstsCanvas.width = innerWidth;
  burstsCanvas.height= innerHeight;
}
addEventListener('resize', fit); fit();

const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;

/* ===== STARFIELD ===== */
const stars = Array.from({length: prefersReduced?100:220}).map(()=>({
  x: Math.random()*innerWidth,
  y: Math.random()*innerHeight,
  z: Math.random()*0.6+0.4,  // parallax
  tw: Math.random()*0.6+0.4
}));
function drawStars(t){
  starCtx.clearRect(0,0,starCanvas.width,starCanvas.height);
  starCtx.fillStyle='#fff';
  stars.forEach(s=>{
    const y = (s.y + 0.03*s.z) % innerHeight; s.y = y;
    const a = 0.6 + 0.4*Math.sin((t/7000 + s.x*0.002)*s.tw);
    starCtx.globalAlpha = a*0.8;
    starCtx.fillRect(s.x, y, 1.2*s.z, 1.2*s.z);
  });
}

/* ===== VOTE BURSTS ===== */
let particles=[];
function burst(x,y,type='confetti',scale=1){
  const N = 24+Math.floor(Math.random()*16);
  for(let i=0;i<N;i++){
    const ang = Math.random()*Math.PI*2;
    const sp = (Math.random()*2+1.5)*scale;
    if(type==='emoji'){
      const emojis = ['‚ú®','‚≠ê','üåü','ü™ê','üå†','üåô','‚òÑÔ∏è','üí´', Math.random()<0.08?'üí©':'‚ú®'];
      particles.push({x,y,vx:Math.cos(ang)*sp, vy:Math.sin(ang)*sp-1.5, g:0.05, a:1, t:'emoji', txt:emojis[Math.floor(Math.random()*emojis.length)], sz:16+Math.random()*10});
    }else{
      const hues=[170,195,260,320];
      const h=hues[Math.floor(Math.random()*hues.length)];
      particles.push({x,y,vx:Math.cos(ang)*sp, vy:Math.sin(ang)*sp-1.2, g:0.06, a:1, t:'dot', c:`hsl(${h} 90% 70%)`, r:2+Math.random()*3});
    }
  }
}
function drawBursts(){
  burstsCtx.clearRect(0,0,burstsCanvas.width,burstsCanvas.height);
  particles.forEach(p=>{
    p.vy+=p.g; p.x+=p.vx; p.y+=p.vy; p.a*=0.985;
    burstsCtx.globalAlpha=p.a;
    if(p.t==='dot'){
      burstsCtx.fillStyle=p.c;
      burstsCtx.beginPath(); burstsCtx.arc(p.x,p.y,p.r,0,Math.PI*2); burstsCtx.fill();
    }else{
      burstsCtx.font = `${p.sz}px system-ui, emoji`;
      burstsCtx.fillText(p.txt,p.x,p.y);
    }
  });
  particles = particles.filter(p=>p.a>0.04 && p.y<innerHeight+40 && p.x>-40 && p.x<innerWidth+40);
}

/* ===== RENDER ===== */
function render(){
  const grid = $('#grid'); grid.innerHTML = '';
  const filtered = DESTS.filter(d=>{
    const q = searchQ.trim().toLowerCase();
    const qOk = !q || d.name.toLowerCase().includes(q) || d.state.toLowerCase().includes(q) || d.tags.join(' ').includes(q);
    const tagOk = activeTags.has('all') ? true : d.tags.some(t=>activeTags.has(t));
    return qOk && tagOk;
  });

  if($('#sortVotes').dataset.sorted === 'true'){
    filtered.sort((a,b)=> (votes[b.id]||0) - (votes[a.id]||0));
  }

  filtered.forEach(d=>{
    const v = votes[d.id]||0;
    const top = isTop(d.id);
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="badge">${d.state}${top ? ' ¬∑ <span class="crown">üëë Top</span>' : ''}</div>
      <div class="title">${d.name}</div>
      <div class="meta">${d.tags.map(t=>`<span class="tag">#${t}</span>`).join(' ')}</div>
      <p class="why">${d.why}</p>
      <div class="actions">
        <button class="btn ${v? 'liked':''}" data-vote="${d.id}" aria-pressed="${!!v}">${v? '‚úÖ Voted':'üëç Vote'}</button>
        <span class="count" id="c_${d.id}">${v}</span>
        <a class="btn ghost" target="_blank" rel="noopener" href="${google(d.name)}">üîé Google</a>
        <button class="btn ghost" data-pick="${d.id}">‚≠ê Pin</button>
        <button class="btn ghost" data-reset="${d.id}" title="Reset this card">‚ôªÔ∏è</button>
      </div>
    `;
    addLongPress(card.querySelector(`[data-vote="${d.id}"]`), ()=> resetOne(d.id));
    grid.appendChild(card);
  });

  renderPinned();
  updateBoard();
}

/* ===== HELPERS ===== */
function google(n){ return `https://www.google.com/search?q=${encodeURIComponent(n+' India')}` }
function loadVotes(){
  try{
    const qs = new URLSearchParams(location.search);
    if(qs.get('votes')){
      const imported = JSON.parse(decodeURIComponent(qs.get('votes')));
      const obj = Array.isArray(imported) ? Object.fromEntries(imported) : imported;
      localStorage.setItem(votesKey, JSON.stringify(obj));
      history.replaceState({}, '', location.pathname);
      return obj;
    }
    return JSON.parse(localStorage.getItem(votesKey) || '{}');
  }catch(e){ return {} }
}
function saveVotes(){ localStorage.setItem(votesKey, JSON.stringify(votes)) }
function total(id){ return votes[id]||0 }
function topScore(){ return Math.max(0, ...DESTS.map(d=>total(d.id))) }
function isTop(id){ return total(id) === topScore() && topScore() > 0 }
function shareVotes(){
  const url = `${location.origin}${location.pathname}?votes=${encodeURIComponent(JSON.stringify(votes))}`;
  navigator.clipboard.writeText(url).then(()=> alert('Shareable link copied!'));
}
function renderPinned(){
  const sel = $('#selected');
  const arr = JSON.parse(localStorage.getItem(picksKey) || '[]');
  sel.innerHTML = arr.length ? '' : '<span class="hint">Pin favourites to see them here.</span>';
  arr.forEach(id=>{
    const d = DESTS.find(x=>x.id===id); if(!d) return;
    const pill = document.createElement('div'); pill.className='pill';
    pill.innerHTML = `‚≠ê ${d.name} <button class="btn ghost" data-unpin="${id}">‚úï</button>`;
    sel.appendChild(pill);
  });
}
function resetOne(id){ votes[id]=0; saveVotes(); render(); }
function addLongPress(el, cb){
  let t; el.addEventListener('touchstart', ()=>{ t=setTimeout(cb,600) }, {passive:true});
  ['touchend','touchcancel','touchmove'].forEach(ev=> el.addEventListener(ev, ()=> clearTimeout(t), {passive:true}));
}

/* ===== EVENTS ===== */
document.addEventListener('click', (e)=>{
  const id = e.target?.dataset?.vote;
  if(id){
    votes[id] = votes[id] ? 0 : 1;
    saveVotes(); render();

    // burst animation near the button
    const rect = e.target.getBoundingClientRect();
    const x = rect.left + rect.width/2, y = rect.top + window.scrollY + rect.height/2;
    const types = ['confetti','emoji']; // emoji includes stars/planets + rare üí©
    const type = types[Math.floor(Math.random()*types.length)];
    burst(x, y, type, votes[id]?1.1:0.7);
    return;
  }
  const pick = e.target?.dataset?.pick;
  if(pick){
    const arr = JSON.parse(localStorage.getItem(picksKey) || '[]'); if(!arr.includes(pick)) arr.push(pick);
    localStorage.setItem(picksKey, JSON.stringify(arr)); renderPinned(); return;
  }
  const un = e.target?.dataset?.unpin;
  if(un){
    const arr = JSON.parse(localStorage.getItem(picksKey) || '[]').filter(x=>x!==un);
    localStorage.setItem(picksKey, JSON.stringify(arr)); renderPinned(); return;
  }
  const r = e.target?.dataset?.reset;
  if(r){ resetOne(r); return; }
});

/* Filters ‚Äî working */
document.getElementById('filters').addEventListener('click', (e)=>{
  const tag = e.target?.dataset?.tag; if(!tag) return;
  if(tag==='all'){
    const chip = e.target; const on = chip.classList.contains('on');
    if(!on){ activeTags = new Set(['all']); $$('.chip').forEach(c=>c.classList.add('on')) }
    else { activeTags.delete('all'); chip.classList.remove('on') }
    render(); return;
  }
  const chip = e.target;
  if(chip.classList.contains('on')){ chip.classList.remove('on'); activeTags.delete(tag); }
  else { chip.classList.add('on'); activeTags.add(tag); }
  if(activeTags.size===0){ activeTags.add('all'); $(`.chip[data-tag="all"]`).classList.add('on'); }
  else { activeTags.delete('all'); $(`.chip[data-tag="all"]`).classList.remove('on'); }
  render();
});

$('#q').addEventListener('input', e=>{ searchQ=e.target.value; render(); });
$('#clear').addEventListener('click', ()=>{ $('#q').value=''; searchQ=''; render(); });
$('#randomize').addEventListener('click', ()=>{ $('#sortVotes').dataset.sorted='false'; DESTS.sort(()=>Math.random()-.5); render(); });
$('#sortVotes').addEventListener('click', (e)=>{
  const on = e.target.dataset.sorted === 'true';
  e.target.dataset.sorted = on ? 'false' : 'true';
  e.target.textContent = on ? 'Sort by Votes' : 'Sorted ‚úì';
  render();
});
$('#resetVotes').addEventListener('click', ()=>{ if(confirm('Reset all votes on this device?')){ votes={}; saveVotes(); render(); } });
$('#share').addEventListener('click', shareVotes);

/* ===== RAF LOOPS ===== */
let last=0;
function loop(ts){
  if(!last) last=ts;
  drawStars(ts);
  drawBursts();
  requestAnimationFrame(loop);
}
if(!prefersReduced) requestAnimationFrame(loop);
else drawStars(0); // static stars if reduced motion

/* ===== INIT ===== */
render();
</script>
</body>
</html>
